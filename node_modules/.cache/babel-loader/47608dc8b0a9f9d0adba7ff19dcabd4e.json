{"ast":null,"code":"export const fetchLogin = (toggle, e, dispatch, history, fetchObjectives, fetchLinks) => {\n  if (toggle === false) {\n    let user = {\n      name: e.target[0].value,\n      password: e.target[1].value\n    };\n    let reqPackage = {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Accept\": \"application/json\" // \"Authorization\": `Bearer ${localStorage.getItem('token')}`\n\n      },\n      body: JSON.stringify(user)\n    };\n    fetch(\"http://localhost:3000/api/v1/login\", reqPackage).then(res => res.json()).then(data => {\n      localStorage.setItem(\"token\", data.token);\n      data.token === \"Incorrect name or password\" ? dispatch({\n        type: 'FOOL'\n      }) : dispatch({\n        type: 'GET_LOGIN',\n        username: data.name\n      });\n    }).then(() => localStorage.token === \"Incorrect name or password\" ? null : fetchObjectives(dispatch)).then(() => localStorage.token === \"Incorrect name or password\" ? null : fetchLinks(dispatch)).then(() => localStorage.token === \"Incorrect name or password\" ? null : generateTimers(dispatch)).then(() => localStorage.token === \"Incorrect name or password\" ? history.push(\"/\") : history.push(\"/main\"));\n  }\n\n  if (toggle === true) {\n    let user = {\n      name: e.target[0].value,\n      password: e.target[1].value\n    };\n    let reqPackage = {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\"\n      },\n      body: JSON.stringify(user)\n    };\n    fetch(\"http://localhost:3000/api/v1/signup\", reqPackage).then(res => res.json()).then(data => {\n      data.token === \"Incorrect name or password\" ? dispatch({\n        type: 'FOOL'\n      }) : dispatch({\n        type: 'SIGNUP'\n      });\n    });\n  }\n};","map":{"version":3,"sources":["/home/learn/flatiron/week10/second/second_frontend/src/actions/loginAction.js"],"names":["fetchLogin","toggle","e","dispatch","history","fetchObjectives","fetchLinks","user","name","target","value","password","reqPackage","method","headers","body","JSON","stringify","fetch","then","res","json","data","localStorage","setItem","token","type","username","generateTimers","push","Accept"],"mappings":"AAAA,OAAO,MAAMA,UAAU,GAAG,CAACC,MAAD,EAASC,CAAT,EAAYC,QAAZ,EAAsBC,OAAtB,EAA+BC,eAA/B,EAAgDC,UAAhD,KAA+D;AAErF,MAAIL,MAAM,KAAK,KAAf,EAAsB;AAElB,QAAIM,IAAI,GAAG;AACPC,MAAAA,IAAI,EAAEN,CAAC,CAACO,MAAF,CAAS,CAAT,EAAYC,KADX;AAEPC,MAAAA,QAAQ,EAAET,CAAC,CAACO,MAAF,CAAS,CAAT,EAAYC;AAFf,KAAX;AAKA,QAAIE,UAAU,GAAG;AACbC,MAAAA,MAAM,EAAE,MADK;AAEbC,MAAAA,OAAO,EAAE;AACL,wBAAgB,kBADX;AAEL,kBAAU,kBAFL,CAGL;;AAHK,OAFI;AAObC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeV,IAAf;AAPO,KAAjB;AAUAW,IAAAA,KAAK,CAAC,oCAAD,EAAuCN,UAAvC,CAAL,CACKO,IADL,CACWC,GAAD,IAASA,GAAG,CAACC,IAAJ,EADnB,EAEKF,IAFL,CAEWG,IAAD,IAAU;AACZC,MAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BF,IAAI,CAACG,KAAnC;AACAH,MAAAA,IAAI,CAACG,KAAL,KAAe,4BAAf,GAA8CtB,QAAQ,CAAC;AAAEuB,QAAAA,IAAI,EAAE;AAAR,OAAD,CAAtD,GAA2EvB,QAAQ,CAAC;AAAEuB,QAAAA,IAAI,EAAE,WAAR;AAAqBC,QAAAA,QAAQ,EAAEL,IAAI,CAACd;AAApC,OAAD,CAAnF;AACH,KALL,EAMKW,IANL,CAMU,MAAMI,YAAY,CAACE,KAAb,KAAuB,4BAAvB,GAAsD,IAAtD,GAA6DpB,eAAe,CAACF,QAAD,CAN5F,EAOKgB,IAPL,CAOU,MAAMI,YAAY,CAACE,KAAb,KAAuB,4BAAvB,GAAsD,IAAtD,GAA6DnB,UAAU,CAACH,QAAD,CAPvF,EAQKgB,IARL,CAQU,MAAMI,YAAY,CAACE,KAAb,KAAuB,4BAAvB,GAAsD,IAAtD,GAA6DG,cAAc,CAACzB,QAAD,CAR3F,EASKgB,IATL,CASU,MAAMI,YAAY,CAACE,KAAb,KAAuB,4BAAvB,GAAsDrB,OAAO,CAACyB,IAAR,CAAa,GAAb,CAAtD,GAA0EzB,OAAO,CAACyB,IAAR,CAAa,OAAb,CAT1F;AAWH;;AAED,MAAI5B,MAAM,KAAK,IAAf,EAAqB;AAEjB,QAAIM,IAAI,GAAG;AACPC,MAAAA,IAAI,EAAEN,CAAC,CAACO,MAAF,CAAS,CAAT,EAAYC,KADX;AAEPC,MAAAA,QAAQ,EAAET,CAAC,CAACO,MAAF,CAAS,CAAT,EAAYC;AAFf,KAAX;AAKA,QAAIE,UAAU,GAAG;AACbC,MAAAA,MAAM,EAAE,MADK;AAEbC,MAAAA,OAAO,EAAE;AACL,wBAAgB,kBADX;AAELgB,QAAAA,MAAM,EAAE;AAFH,OAFI;AAMbf,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeV,IAAf;AANO,KAAjB;AASAW,IAAAA,KAAK,CAAC,qCAAD,EAAwCN,UAAxC,CAAL,CACKO,IADL,CACWC,GAAD,IAASA,GAAG,CAACC,IAAJ,EADnB,EAEKF,IAFL,CAEWG,IAAD,IAAU;AACZA,MAAAA,IAAI,CAACG,KAAL,KAAe,4BAAf,GAA8CtB,QAAQ,CAAC;AAAEuB,QAAAA,IAAI,EAAE;AAAR,OAAD,CAAtD,GAA2EvB,QAAQ,CAAC;AAAEuB,QAAAA,IAAI,EAAE;AAAR,OAAD,CAAnF;AACH,KAJL;AAMH;AACJ,CAvDM","sourcesContent":["export const fetchLogin = (toggle, e, dispatch, history, fetchObjectives, fetchLinks) => {\n\n    if (toggle === false) {\n\n        let user = {\n            name: e.target[0].value,\n            password: e.target[1].value,\n        };\n\n        let reqPackage = {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\",\n                \"Accept\": \"application/json\",\n                // \"Authorization\": `Bearer ${localStorage.getItem('token')}`\n            },\n            body: JSON.stringify(user),\n        };\n\n        fetch(\"http://localhost:3000/api/v1/login\", reqPackage)\n            .then((res) => res.json())\n            .then((data) => {\n                localStorage.setItem(\"token\", data.token)\n                data.token === \"Incorrect name or password\" ? dispatch({ type: 'FOOL' }) : dispatch({ type: 'GET_LOGIN', username: data.name })\n            })\n            .then(() => localStorage.token === \"Incorrect name or password\" ? null : fetchObjectives(dispatch))\n            .then(() => localStorage.token === \"Incorrect name or password\" ? null : fetchLinks(dispatch))\n            .then(() => localStorage.token === \"Incorrect name or password\" ? null : generateTimers(dispatch))\n            .then(() => localStorage.token === \"Incorrect name or password\" ? history.push(\"/\") : history.push(\"/main\"))\n\n    }\n\n    if (toggle === true) {\n\n        let user = {\n            name: e.target[0].value,\n            password: e.target[1].value,\n        };\n\n        let reqPackage = {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\",\n                Accept: \"application/json\",\n            },\n            body: JSON.stringify(user),\n        };\n\n        fetch(\"http://localhost:3000/api/v1/signup\", reqPackage)\n            .then((res) => res.json())\n            .then((data) => {\n                data.token === \"Incorrect name or password\" ? dispatch({ type: 'FOOL' }) : dispatch({ type: 'SIGNUP' })\n            })\n\n    }\n}"]},"metadata":{},"sourceType":"module"}